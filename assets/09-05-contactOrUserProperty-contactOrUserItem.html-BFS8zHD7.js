import{_ as n,c as a,e,o as t}from"./app-CdUme-sL.js";const o={};function r(p,s){return t(),a("div",null,s[0]||(s[0]=[e(`<h1 id="contactoruserproperty-and-contactoruseritem" tabindex="-1"><a class="header-anchor" href="#contactoruserproperty-and-contactoruseritem"><span>contactOrUserProperty and contactOrUserItem</span></a></h1><p>From <strong>user service</strong> (<code>use: [ userService ]</code>). The owner is either a <strong>Contact</strong> (e.g. email, phone) or a <strong>User</strong>. Used when the same logical “owner” can be a not-yet-linked contact (e.g. email address) or a user after the contact is connected. A processor turns these into <strong>propertyOfAny</strong> / <strong>itemOfAny</strong> with <strong>to: [&#39;contactOrUser&#39;, ...extendedWith]</strong> and <strong>contactOrUserTypes</strong> built from <code>definition.config.contactTypes</code> (e.g. <code>[&#39;user_User&#39;, &#39;email_Email&#39;, &#39;phone_Phone&#39;]</code>). On <strong>contactConnected</strong>, contact data can be transferred or merged to the user.</p><h2 id="contactoruserproperty" tabindex="-1"><a class="header-anchor" href="#contactoruserproperty"><span>contactOrUserProperty</span></a></h2><p>One record per contact-or-user (and optionally <strong>extendedWith</strong>). Same idea as sessionOrUserProperty but owner types include contact types (email_Email, phone_Phone, etc.). The processor adds views and actions (set/update/reset/setOrUpdate) and handles <strong>contactConnected</strong> to move or merge contact property to the user.</p><h3 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration"><span>Configuration</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">model<span class="token punctuation">.</span>contactOrUserProperty <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  extendedWith<span class="token operator">?</span><span class="token operator">:</span> string <span class="token operator">|</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  ownerReadAccess<span class="token operator">?</span><span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">,</span></span>
<span class="line">  ownerSetAccess<span class="token operator">?</span><span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">,</span></span>
<span class="line">  ownerUpdateAccess<span class="token operator">?</span><span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">,</span></span>
<span class="line">  ownerResetAccess<span class="token operator">?</span><span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">,</span></span>
<span class="line">  ownerWriteAccess<span class="token operator">?</span><span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">,</span></span>
<span class="line">  writeableProperties<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  merge<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">contactProperty<span class="token punctuation">,</span> userProperty</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> mergedData <span class="token operator">|</span> <span class="token keyword">null</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>contactOrUserTypes</strong> are derived from app config: <code>contactTypes</code> (e.g. <code>[&#39;email&#39;, &#39;phone&#39;]</code>) become types like <code>email_Email</code>, <code>phone_Phone</code>, plus <code>user_User</code>.</p><h2 id="contactoruseritem" tabindex="-1"><a class="header-anchor" href="#contactoruseritem"><span>contactOrUserItem</span></a></h2><p>Many records per contact-or-user. Same as sessionOrUserItem but with contact types as possible owners. The processor adds range/single views and create/update/delete actions, and <strong>contactConnected</strong> can transfer or merge items (merge returns { transferred, updated, deleted }).</p><h3 id="configuration-1" tabindex="-1"><a class="header-anchor" href="#configuration-1"><span>Configuration</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">model<span class="token punctuation">.</span>contactOrUserItem <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  extendedWith<span class="token operator">?</span><span class="token operator">:</span> string <span class="token operator">|</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  ownerReadAccess<span class="token operator">?</span><span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">,</span></span>
<span class="line">  ownerCreateAccess<span class="token operator">?</span><span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">,</span></span>
<span class="line">  ownerUpdateAccess<span class="token operator">?</span><span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">,</span></span>
<span class="line">  ownerWriteAccess<span class="token operator">?</span><span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">,</span></span>
<span class="line">  writableProperties<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  sortBy<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  merge<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">contactItems<span class="token punctuation">,</span> userItems</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> transferred<span class="token operator">?</span><span class="token punctuation">,</span> updated<span class="token operator">?</span><span class="token punctuation">,</span> deleted<span class="token operator">?</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="when-to-use" tabindex="-1"><a class="header-anchor" href="#when-to-use"><span>When to use</span></a></h2><p>Use when the same entity can be owned by a <strong>contact</strong> (e.g. email or phone before account exists) or by a <strong>User</strong> after the contact is connected. Requires <strong>contactTypes</strong> in app.config for the user service (e.g. <code>[&#39;email&#39;, &#39;phone&#39;]</code>).</p>`,13)]))}const i=n(o,[["render",r]]),l=JSON.parse('{"path":"/server/09-05-contactOrUserProperty-contactOrUserItem.html","title":"contactOrUserProperty and contactOrUserItem","lang":"en-US","frontmatter":{"title":"contactOrUserProperty and contactOrUserItem"},"headers":[{"level":2,"title":"contactOrUserProperty","slug":"contactoruserproperty","link":"#contactoruserproperty","children":[{"level":3,"title":"Configuration","slug":"configuration","link":"#configuration","children":[]}]},{"level":2,"title":"contactOrUserItem","slug":"contactoruseritem","link":"#contactoruseritem","children":[{"level":3,"title":"Configuration","slug":"configuration-1","link":"#configuration-1","children":[]}]},{"level":2,"title":"When to use","slug":"when-to-use","link":"#when-to-use","children":[]}],"git":{"updatedTime":1771163669000,"contributors":[{"name":"Michał Łaszczewski","username":"","email":"michal@laszczewski.com","commits":1}],"changelog":[{"hash":"cfc969ff1ce8a43846182cb1c9818f3c88cd885a","time":1771163669000,"email":"michal@laszczewski.com","author":"Michał Łaszczewski","message":"docs"}]},"filePathRelative":"server/09-05-contactOrUserProperty-contactOrUserItem.md"}');export{i as comp,l as data};
