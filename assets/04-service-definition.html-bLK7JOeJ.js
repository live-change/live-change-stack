import{_ as n,c as e,e as a,o as i}from"./app-CdUme-sL.js";const p={};function c(l,s){return i(),e("div",null,s[0]||(s[0]=[a(`<h1 id="service-definition" tabindex="-1"><a class="header-anchor" href="#service-definition"><span>Service definition</span></a></h1><p>A service is defined with <strong>app.createServiceDefinition({ name, use })</strong>. The <strong>name</strong> must match the entry in <code>app.config.services</code> and in <code>services.list.js</code>. The <strong>use</strong> array lists dependencies: other service definitions and plugins (e.g. relationsPlugin) that provide models, access control, or processors.</p><h2 id="creating-the-definition" tabindex="-1"><a class="header-anchor" href="#creating-the-definition"><span>Creating the definition</span></a></h2><p>Use the global app from <code>@live-change/framework</code> and call <code>createServiceDefinition</code>. Export the definition and in other files call <code>definition.model()</code>, <code>definition.action()</code>, <code>definition.view()</code>, <code>definition.trigger()</code>, etc.</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// Source: live-change-stack/services/billing-service/definition.js</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;@live-change/framework&#39;</span></span>
<span class="line"><span class="token keyword">const</span> app <span class="token operator">=</span> App<span class="token punctuation">.</span><span class="token function">app</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> userService <span class="token keyword">from</span> <span class="token string">&#39;@live-change/user-service&#39;</span></span>
<span class="line"><span class="token keyword">import</span> relationsPlugin <span class="token keyword">from</span> <span class="token string">&#39;@live-change/relations-plugin&#39;</span></span>
<span class="line"><span class="token keyword">import</span> accessControlService <span class="token keyword">from</span> <span class="token string">&#39;@live-change/access-control-service&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> definition <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">createServiceDefinition</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;billing&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span> userService<span class="token punctuation">,</span> relationsPlugin<span class="token punctuation">,</span> accessControlService <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> definition</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="example-speed-dating-service" tabindex="-1"><a class="header-anchor" href="#example-speed-dating-service"><span>Example: speed-dating service</span></a></h2><p>Local project service with user, email, relations, and access control:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// Source: speed-dating/server/speed-dating-service/definition.js</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;@live-change/framework&#39;</span></span>
<span class="line"><span class="token keyword">const</span> app <span class="token operator">=</span> App<span class="token punctuation">.</span><span class="token function">app</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> relationsPlugin <span class="token keyword">from</span> <span class="token string">&#39;@live-change/relations-plugin&#39;</span></span>
<span class="line"><span class="token keyword">import</span> userService <span class="token keyword">from</span> <span class="token string">&#39;@live-change/user-service&#39;</span></span>
<span class="line"><span class="token keyword">import</span> emailService <span class="token keyword">from</span> <span class="token string">&#39;@live-change/email-service&#39;</span></span>
<span class="line"><span class="token keyword">import</span> accessControlService <span class="token keyword">from</span> <span class="token string">&#39;@live-change/access-control-service&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> definition <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">createServiceDefinition</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;speedDating&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span> userService<span class="token punctuation">,</span> emailService<span class="token punctuation">,</span> relationsPlugin<span class="token punctuation">,</span> accessControlService <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> definition</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="example-scan-service" tabindex="-1"><a class="header-anchor" href="#example-scan-service"><span>Example: scan service</span></a></h2><p>Minimal dependencies (relations, user, access control):</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// Source: ipi-web/scan/server/scan-service/definition.js</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;@live-change/framework&#39;</span></span>
<span class="line"><span class="token keyword">const</span> app <span class="token operator">=</span> App<span class="token punctuation">.</span><span class="token function">app</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> relationsPlugin <span class="token keyword">from</span> <span class="token string">&#39;@live-change/relations-plugin&#39;</span></span>
<span class="line"><span class="token keyword">import</span> userService <span class="token keyword">from</span> <span class="token string">&#39;@live-change/user-service&#39;</span></span>
<span class="line"><span class="token keyword">import</span> accessControlService <span class="token keyword">from</span> <span class="token string">&#39;@live-change/access-control-service&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> definition <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">createServiceDefinition</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;scan&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span> relationsPlugin<span class="token punctuation">,</span> userService<span class="token punctuation">,</span> accessControlService <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> definition</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="typical-dependencies" tabindex="-1"><a class="header-anchor" href="#typical-dependencies"><span>Typical dependencies</span></a></h2><ul><li><strong>userService</strong> — Users and session/user context; often needed for <code>client.user</code>, ownership, and user-scoped models.</li><li><strong>relationsPlugin</strong> — Adds propertyOf, itemOf, propertyOfAny, itemOfAny, boundTo, relatedTo to models.</li><li><strong>accessControlService</strong> — Roles and object-level access (invitations, visibility).</li><li><strong>emailService</strong> — Sending email (e.g. speed-dating invites).</li></ul><p>The <strong>definition</strong> object is then used in the same or other files to define models, actions, views, triggers, indexes, and foreign models.</p>`,14)]))}const o=n(p,[["render",c]]),r=JSON.parse('{"path":"/server/04-service-definition.html","title":"Service definition","lang":"en-US","frontmatter":{"title":"Service definition"},"headers":[{"level":2,"title":"Creating the definition","slug":"creating-the-definition","link":"#creating-the-definition","children":[]},{"level":2,"title":"Example: speed-dating service","slug":"example-speed-dating-service","link":"#example-speed-dating-service","children":[]},{"level":2,"title":"Example: scan service","slug":"example-scan-service","link":"#example-scan-service","children":[]},{"level":2,"title":"Typical dependencies","slug":"typical-dependencies","link":"#typical-dependencies","children":[]}],"git":{"updatedTime":1771163669000,"contributors":[{"name":"Michał Łaszczewski","username":"","email":"michal@laszczewski.com","commits":1}],"changelog":[{"hash":"cfc969ff1ce8a43846182cb1c9818f3c88cd885a","time":1771163669000,"email":"michal@laszczewski.com","author":"Michał Łaszczewski","message":"docs"}]},"filePathRelative":"server/04-service-definition.md"}');export{o as comp,r as data};
