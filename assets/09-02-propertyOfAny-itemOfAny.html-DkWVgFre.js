import{_ as o,c as r,e as l,a,b as s,d as p,w as t,r as i,o as c}from"./app-CdUme-sL.js";const u={};function k(d,n){const e=i("RouteLink");return c(),r("div",null,[n[13]||(n[13]=l(`<h1 id="propertyofany-and-itemofany" tabindex="-1"><a class="header-anchor" href="#propertyofany-and-itemofany"><span>propertyOfAny and itemOfAny</span></a></h1><p>From <strong>relations plugin</strong> (<code>use: [ relationsPlugin ]</code>). Parent is <strong>polymorphic</strong>: one of several types (e.g. sessionOrUser, owner/topic, cause, object). You specify <strong>to</strong> (identifier names) and <strong>ownerTypes</strong> / <strong>topicTypes</strong> / <strong>jobTypes</strong> etc. (allowed type names like <code>[&#39;session_Session&#39;, &#39;user_User&#39;]</code> or <code>[&#39;cron_Interval&#39;, &#39;cron_Schedule&#39;]</code>).</p><ul><li><strong>propertyOfAny</strong> — One child per parent; parent type can vary.</li><li><strong>itemOfAny</strong> — Many children per parent; parent type can vary.</li></ul><h2 id="propertyofany-—-configuration" tabindex="-1"><a class="header-anchor" href="#propertyofany-—-configuration"><span>propertyOfAny — configuration</span></a></h2><p>Same access options as propertyOf, plus:</p><ul><li><strong>to</strong> — Array of identifier names (e.g. <code>[&#39;owner&#39;, &#39;topic&#39;]</code>, <code>[&#39;sessionOrUser&#39;]</code>).</li><li><strong>ownerTypes</strong> / <strong>topicTypes</strong> / etc. — Allowed parent type names for each “to” dimension (depending on plugin/service usage).</li></ul><h2 id="itemofany-—-configuration" tabindex="-1"><a class="header-anchor" href="#itemofany-—-configuration"><span>itemOfAny — configuration</span></a></h2><p>Same access options as itemOf, plus:</p><ul><li><strong>to</strong> — Array of identifier names or single string (e.g. <code>[&#39;sessionOrUser&#39;]</code>, <code>&#39;cause&#39;</code>).</li><li><strong>ownerTypes</strong> / <strong>sessionOrUserTypes</strong> / <strong>jobTypes</strong> / <strong>contactOrUserTypes</strong> — Allowed parent type names.</li></ul><h2 id="example-propertyofany-schedule-interval-—-cron-service" tabindex="-1"><a class="header-anchor" href="#example-propertyofany-schedule-interval-—-cron-service"><span>Example: propertyOfAny (Schedule, Interval — cron-service)</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// Source: live-change-stack/services/cron-service/schedule.js</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> Schedule <span class="token operator">=</span> definition<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Schedule&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">propertyOfAny</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;owner&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;topic&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">ownerTypes</span><span class="token operator">:</span> config<span class="token punctuation">.</span>ownerTypes<span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">topicTypes</span><span class="token operator">:</span> config<span class="token punctuation">.</span>topicTypes<span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">writeAccessControl</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">roles</span><span class="token operator">:</span> config<span class="token punctuation">.</span>adminRoles<span class="token punctuation">,</span> <span class="token literal-property property">objects</span><span class="token operator">:</span> scheduleAccessControlObjects <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">readAccessControl</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">roles</span><span class="token operator">:</span> config<span class="token punctuation">.</span>adminRoles<span class="token punctuation">,</span> <span class="token literal-property property">objects</span><span class="token operator">:</span> scheduleAccessControlObjects <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">readAllAccess</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> String <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">minute</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> Number <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">hour</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> Number <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">day</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> Number <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">dayOfWeek</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> Number <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">trigger</span><span class="token operator">:</span> triggerType</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="example-itemofany-task-—-task-service" tabindex="-1"><a class="header-anchor" href="#example-itemofany-task-—-task-service"><span>Example: itemOfAny (Task — task-service)</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// Source: live-change-stack/services/task-service/model.js</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> Task <span class="token operator">=</span> definition<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Task&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">itemOfAny</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">&#39;cause&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function-variable function">readAccess</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> service<span class="token punctuation">,</span> definition<span class="token punctuation">,</span> properties<span class="token punctuation">,</span> client<span class="token punctuation">,</span> result<span class="token punctuation">,</span> hash<span class="token punctuation">,</span> state<span class="token punctuation">,</span> startedAt<span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">indexes</span><span class="token operator">:</span> <span class="token punctuation">{</span> byCauseAndHash<span class="token punctuation">,</span> byCauseAndState<span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="example-runstate-cron-run-—-job-is-interval-or-schedule" tabindex="-1"><a class="header-anchor" href="#example-runstate-cron-run-—-job-is-interval-or-schedule"><span>Example: RunState (cron run — job is Interval or Schedule)</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// Source: live-change-stack/services/cron-service/run.js</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> RunState <span class="token operator">=</span> definition<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;RunState&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">propertyOfAny</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;job&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">jobTypes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;cron_Interval&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;cron_Schedule&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">readAccessControl</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">roles</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>config<span class="token punctuation">.</span>adminRoles<span class="token punctuation">,</span> <span class="token operator">...</span>config<span class="token punctuation">.</span>readerRoles<span class="token punctuation">]</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">enum</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;running&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;waiting&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">tasks</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> Array<span class="token punctuation">,</span> <span class="token keyword">of</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> Task <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">startedAt</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> Date <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">returnTask</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> Boolean <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,15)),a("p",null,[n[2]||(n[2]=s("User-service uses ")),n[3]||(n[3]=a("strong",null,"propertyOfAny",-1)),n[4]||(n[4]=s(" / ")),n[5]||(n[5]=a("strong",null,"itemOfAny",-1)),n[6]||(n[6]=s(" internally for sessionOrUser and contactOrUser with ")),n[7]||(n[7]=a("strong",null,"sessionOrUserTypes",-1)),n[8]||(n[8]=s(" / ")),n[9]||(n[9]=a("strong",null,"contactOrUserTypes",-1)),n[10]||(n[10]=s("; see ")),p(e,{to:"/server/09-04-sessionOrUserProperty-sessionOrUserItem.html"},{default:t(()=>n[0]||(n[0]=[s("sessionOrUserProperty / sessionOrUserItem")])),_:1,__:[0]}),n[11]||(n[11]=s(" and ")),p(e,{to:"/server/09-05-contactOrUserProperty-contactOrUserItem.html"},{default:t(()=>n[1]||(n[1]=[s("contactOrUserProperty / contactOrUserItem")])),_:1,__:[1]}),n[12]||(n[12]=s("."))])])}const m=o(u,[["render",k]]),v=JSON.parse('{"path":"/server/09-02-propertyOfAny-itemOfAny.html","title":"propertyOfAny and itemOfAny","lang":"en-US","frontmatter":{"title":"propertyOfAny and itemOfAny"},"headers":[{"level":2,"title":"propertyOfAny — configuration","slug":"propertyofany-—-configuration","link":"#propertyofany-—-configuration","children":[]},{"level":2,"title":"itemOfAny — configuration","slug":"itemofany-—-configuration","link":"#itemofany-—-configuration","children":[]},{"level":2,"title":"Example: propertyOfAny (Schedule, Interval — cron-service)","slug":"example-propertyofany-schedule-interval-—-cron-service","link":"#example-propertyofany-schedule-interval-—-cron-service","children":[]},{"level":2,"title":"Example: itemOfAny (Task — task-service)","slug":"example-itemofany-task-—-task-service","link":"#example-itemofany-task-—-task-service","children":[]},{"level":2,"title":"Example: RunState (cron run — job is Interval or Schedule)","slug":"example-runstate-cron-run-—-job-is-interval-or-schedule","link":"#example-runstate-cron-run-—-job-is-interval-or-schedule","children":[]}],"git":{"updatedTime":1771163669000,"contributors":[{"name":"Michał Łaszczewski","username":"","email":"michal@laszczewski.com","commits":1}],"changelog":[{"hash":"cfc969ff1ce8a43846182cb1c9818f3c88cd885a","time":1771163669000,"email":"michal@laszczewski.com","author":"Michał Łaszczewski","message":"docs"}]},"filePathRelative":"server/09-02-propertyOfAny-itemOfAny.md"}');export{m as comp,v as data};
